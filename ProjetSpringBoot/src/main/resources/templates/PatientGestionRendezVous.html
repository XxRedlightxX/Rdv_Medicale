<html xmlns:th="http://www.thymeleaf.org">
<!DOCTYPE html>

<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Connexion</title>
        <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script src="http://cdn.jsdelivr.net/jquery.validation/1.14.0/jquery.validate.min.js"></script>

        <link rel="stylesheet" type="text/css" th:href="@{/images/css/style.css}"/>
        <style>
            .error {
                color: red;
            }

            input.error {
                border: 1px solid red;
            }
        </style>
    </head>
    <span th:insert="EnTete:: en_tete"></span>

    <body id="body">

    </style>

    <div th:switch="${typeAction}">
        <span th:case="'ajouter'">
            <div id=ls>
                <h1 id="etatPatient">Confirmation du rendez-vous</h1>

            </div> <br>
            <div>
                <div style="text-align:left;margin-left: auto;margin-right: auto;width: 13%;">
                    Pour : [[${PatientService.chercherPatientParAssuranceMaladie(session.username).prenom}]] [[${PatientService.chercherPatientParAssuranceMaladie(session.username).nom}]]</br></br>
                    Médecin : Dr.[[${unRendezVous.medecin_rv.prenom}]] [[${unRendezVous.medecin_rv.nom}]]</br></br>
                    Date du rendez-vous : [[${unRendezVous.date_rv}]] </br></br>
                    Heure : [[${unRendezVous.heure_rv}]]:00</br></br>
                    <form th:action="@{/rendezVous/action/ajouter}" th:object="${rendezVous}">
                        <input type="hidden" th:value="${unRendezVous.patient_rv.id_patient}" th:name="id_patient">
                        <input type="hidden" th:value="${unRendezVous.medecin_rv.id_medecin}" th:name="id_medecin">
                        <input type="hidden" th:value="${unRendezVous.date_rv}" th:name="date_rv">
                        <input type="hidden" th:value="${unRendezVous.heure_rv}" th:name="heure_rv">
                        <label for="raisonConsult">Raison de la consultation :</label></br></br>
                        <select name="raisonConsult" id="raisonConsult" th:field="*{raison_consult}">
                            <option value="Urgence mineure">Urgence mineure</option>
                            <option value="Consultation propriétaire">Consultation propriétaire</option>
                            <option value="Suivi périodique ou préventif">Suivi périodique ou préventif</option>
                            <option value="Suivi régulier">Suivi régulier</option>
                            <option value="Suivi de grossesse">Suivi de grossesse</option>
                            <option value="Suivi d’un enfant 0 à 5 ans">Suivi d’un enfant 0 à 5 ans</option>
                        </select></br></br>
                        <label for="descriptionConsult">Description de la raison :</label></br></br>
                        <textarea style="width:25vh;height:15vh;" id="descriptionConsult" name="descriptionConsult" placeholder="Description de la raison.." style="height:200px" th:field="*{description_consult}"></textarea>

                </div>
                </br>
                <h2 style="text-align:center"> Voulez confirmer ce rendez-vous ?</h2></br>


                <input type="hidden" name="actionRv" value="ajouter">
                <input style="width:100px;" type="submit" value="Réserver">
                </form> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <form style="display:inline;" th:action="@{/enTete/patient/rendezVous}" method="post">
                    <input style="width:100px;" type="submit" value="Annuler">
                </form>
            </div>
        </span>
        <span th:case="'modifier'">
            <div id=ls>
                <h1 id="etatPatient">Modification du rendez-vous</h1>

            </div> <br>
            <div>
                <div style="text-align:left;margin-left: auto;margin-right: auto;width: 15%;">
                    Pour : [[${PatientService.chercherPatientParAssuranceMaladie(session.username).prenom}]] [[${PatientService.chercherPatientParAssuranceMaladie(session.username).nom}]]</br></br>
                    Médecin : Dr.[[${unRendezVous.medecin_rv.prenom}]] [[${unRendezVous.medecin_rv.nom}]]</br></br>
                    Date du rendez-vous : [[${unRendezVous.date_rv}]] </br></br>
                    Heure : [[${unRendezVous.heure_rv}]]:00</br></br>




                        <a th:href="@{/rendezVous/action/changerTemps}">Changer la date et l'heure du rendez-vous</a><br><br>



                    <form th:action="@{/rendezVous/action/modifier}" th:object="${rendezVous}">
                        <input type="hidden" th:value="${unRendezVous.id_rendez_vous}" th:name="id_rendez_vous">
                        <input type="hidden" th:value="${unRendezVous.patient_rv.id_patient}" th:name="patient_rv">
                        <input type="hidden" th:value="${unRendezVous.medecin_rv.id_medecin}" th:name="medecin_rv">
                        <input type="hidden" th:value="${unRendezVous.date_rv}" th:name="date_rv">
                        <input type="hidden" th:value="${unRendezVous.heure_rv}" th:name="heure_rv">
                        <label for="raisonConsult">Raison de la consultation :</label></br></br>
                        <select name="raisonConsult" th:field="*{raison_consult}">
                            <option value="Urgence mineure"<span th:if="${unRendezVous.raison_consult == 'Urgence mineure'}">selected="selected"</span>>Urgence mineure</option>
                            <option value="Consultation propriétaire" <span th:if="${unRendezVous.raison_consult == 'Consultation propriétaire'}">selected="selected"</span>>Consultation propriétaire</option>
                            <option value="Suivi périodique ou préventif" <span th:if="${unRendezVous.raison_consult == 'Suivi périodique ou préventif'}">selected="selected"</span>>Suivi périodique ou préventif</option>
                            <option value="Suivi régulier" <span th:if="${unRendezVous.raison_consult == 'Suivi régulier'}">selected="selected"</span>>Suivi régulier</option>
                            <option value="Suivi de grossesse" <span th:if="${unRendezVous.raison_consult == 'Suivi de grossesse'}">selected="selected"</span>>Suivi de grossesse</option>
                            <option value="Suivi d’un enfant 0 à 5 ans" <span th:if="${unRendezVous.raison_consult == 'Suivi d’un enfant 0 à 5 ans'}">selected="selected"</span>>Suivi d’un enfant 0 à 5 ans</option>
                        </select></br></br>
                        <label for="descriptionConsult">Description de la raison :</label></br></br>
                        <textarea style="width:30vh;height:10vh;" id="descriptionConsult" name="descriptionConsult" th:field="*{description_consult}" style="height:200px">${requestScope.unRendezVous.descriptionConsult}</textarea>

                </div>
                </br>
                <h2 style="text-align:center"> Voulez vous modifier ce rendez-vous ?</h2></br>


                <input type="hidden" name="actionRv" value="modifier">
                <input style="width:100px;" type="submit" value="Sauvegarder">
                </form> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <form style="display:inline;" th:action="@{/enTete/patient/rendezVous}" method="post">
                    <input style="width:100px;" type="submit" value="Annuler">
                </form>
            </div>
        </span>
        <span th:case="'supprimer'">
            <div id=ls>
                <h1 id="etatPatient">Annulation du rendez-vous</h1>

            </div> <br>
            <span th:if="${unRendezVous != null}">
                <div>
                    <table style="margin-left: auto;margin-right: auto;width: 100%;">
                        <tr>
                        <tr>
                            <th>Nom du Médecin :</th>
                            <td>Dr. ${unRendezVous.medecin_rv.prenom} ${unRendezVous.medecin_rv.nom}</td>
                        </tr>
                        <tr>
                            <th>Date du rendez-vous</th>
                            <td>${unRendezVous.date_rv}</td>
                        </tr>
                        <tr>
                            <th>Clinique</th>
                            <td>${unRendezVous.medecin_rv.clinique.nom}</td>
                        </tr>
                        <tr>
                            <th>Adresse</th>
                            <td>${unRendezVous.medecin_rv.clinique.coordonnees}</td>
                        </tr>
                        <tr>
                            <th>Heure :</th>
                            <td>${unRendezVous.heure_rv}:00</td>
                        </tr>
                        <tr>
                            <th>Raison de la Consultation :</th>
                            <td>${unRendezVous.raison_consult}</td>

                        </tr>
                        <tr>
                            <th>Description de la consultation :</th>
                            <td>${unRendezVous.description_consult}</td>
                        </tr>
                    </table>
                </div>
                </br>

                <h2 style="text-align:center"> Voulez vous supprimer ce rendez-vous ?</h2></br>
                <form th:action="@{'/rendezVous/page/supprimer/'+${unRendezVous.id_rendez_vous}}" method="post">
                    <input type="hidden" name="idRendezVous" value="${unRendezVous.idRendezVous}">
                    <input type="hidden" name="actionRv" value="supprimer">
                    <input style="width:100px;" type="submit" value="Supprimer">
                </form> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <form style="display:inline;" th:action="@{/enTete/patient/rendezVous}" method="post">
                    <input style="width:100px;" type="submit" value="Annuler">
                </form>
            </div>    

    </span>
        </span>
    </div>

</body>


<span th:insert="pied:: pied_de_page"></span>

<script src="javaScript/formValidation.js"></script>

</html>
